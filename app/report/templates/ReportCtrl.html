<nav year="{{ year }}" workgroup-id="{{ workgroupId }}"></nav>

<div class="main-content">

	<h3 style="text-align: center;">{{ sharedState.workgroup.name }} Reports</h3>
	<br />

	<div class="row">

		<div class="col-sm-3 col-sm-offset-2">
			<select class="form-control" ng-model="view.selectedYear" ng-change="view.selectedTermCode = null">
				<option value="">Select Year</option>
				<option ng-repeat="year in view.state.terms.ids | termUniqueYears track by $index" ng-value="year">{{ year }}</option>
			</select>
		</div>

		<div class="col-sm-3">
			<select class="form-control" ng-model="view.selectedTermCode" ng-disabled="!view.selectedYear">
				<option value="">Select Term</option>
				<option ng-repeat="termCode in view.state.terms.ids | termsInYear:view.selectedYear track by $index" ng-value="termCode">
					{{ termCode.toString().getTermCodeDisplayName(true) }}
				</option>
			</select>
		</div>

		<div class="col-sm-2">
			<button ng-disabled="!view.selectedTermCode" ng-click="startComparison()" class="form-control btn btn-default">
				Start Comparison
			</button>
		</div>

	</div>

	<div class="row">
		<spinner ng-show="view.state.uiState.comparisonInProgress" style="margin-top: 3em;"></spinner>
		<div class="col-sm-8 col-sm-offset-2" ng-hide="view.state.uiState.comparisonInProgress">
			<ul ng-if="view.state.sections.ids.length" class="section-diff-list">
				<li ng-repeat="sectionId in view.state.sections.ids track by $index" class="section-diff-row" ng-class="{ 'no-changes': view.state.sections.list[sectionId].dwHasChanges === false, 'no-remote': view.state.sections.list[sectionId].dwChanges === null }">
					<!-- CRN -->
					<div class="section-diff-element section-crn" ng-class="{ 'has-changes' : view.state.sections.list[sectionId].dwChanges.crn !== undefined }">
						<span class="ipa-version">
							{{ view.state.sections.list[sectionId].crn || "No CRN" }}
						</span>
						<span class="change-action" ng-if="view.state.sections.list[sectionId].dwChanges.crn !== undefined">
							Banner has: {{ view.state.sections.list[sectionId].dwChanges.crn }}
						</span>
					</div>
					<!-- Section immutable fields: Title, Subject Code, Course Number, and Sequence Number -->
					<div class="section-diff-element section-unique-key">
						- {{ view.state.sections.list[sectionId].subjectCode }} {{ view.state.sections.list[sectionId].courseNumber }} {{ view.state.sections.list[sectionId].title
						}} - {{ view.state.sections.list[sectionId].sequenceNumber }} -
					</div>
					<!-- Seats -->
					<div class="section-diff-element section-seats" ng-class="{ 'has-changes' : view.state.sections.list[sectionId].dwChanges.seats !== undefined }">
						<span class="ipa-version">
							Seats: {{ view.state.sections.list[sectionId].seats }}
						</span>
						<span class="change-action" ng-if="view.state.sections.list[sectionId].dwChanges.seats !== undefined">
							Banner has: {{ view.state.sections.list[sectionId].dwChanges.seats }}
						</span>
					</div>
					<!-- Instructors -->
					<div class="section-diff-element section-instructors-header">
						- Instructors:
					</div>
					<!-- Instructors only in IPA -->
					<div ng-repeat="instructor in view.state.sections.list[sectionId].instructors track by $index" ng-class="{ 'has-changes' : instructor.noRemote }"
						class="section-diff-element section-instructors">
						<span class="ipa-version" ng-class="{ 'no-remote' : instructor.noRemote }">
							{{ instructor | lastSpaceInitial }}
						</span>
						<span class="change-action" ng-if="instructor.noRemote">
							Banner does not have this instructor (Mark for creation)
						</span>
					</div>
					<div ng-repeat="instructor in view.state.sections.list[sectionId].dwChanges.instructors track by $index" class="section-diff-element section-instructors has-changes">
						<span class="no-local">
							{{ instructor | lastSpaceInitial }}
						</span>
						<span class="change-action">
							IPA does not have this instructor (Click to assign)
						</span>
					</div>
				</li>
			</ul>
		</div>
	</div>

</div>