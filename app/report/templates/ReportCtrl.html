<nav year="{{ year }}" workgroup-id="{{ workgroupId }}"></nav>

<div class="main-content">

	<h3 style="text-align: center;">{{ sharedState.workgroup.name }} Reports</h3>
	<br />

	<div class="row">

		<div class="col-sm-4 col-sm-offset-3">
			<select class="form-control" ng-model="view.selectedTermCode" ng-disabled="!year">
				<option value="">Select Term</option>
				<option ng-repeat="termCode in view.state.terms.ids | termsInYear:year track by $index" ng-value="termCode">
					{{ termCode.toString().getTermCodeDisplayName(true) }}
				</option>
			</select>
		</div>

		<div class="col-sm-2">
			<button ng-disabled="!view.selectedTermCode" ng-click="startComparison()" class="form-control btn btn-default">
				Start Comparison
			</button>
		</div>

	</div>

	<div class="row">
		<spinner ng-show="view.state.uiState.comparisonInProgress" style="margin-top: 3em;"></spinner>
		<div class="col-sm-8 col-sm-offset-2" ng-hide="view.state.uiState.comparisonInProgress">
			<ul ng-if="view.state.sections.ids.length" class="section-diff-list">
				<li ng-repeat="sectionId in view.state.sections.ids track by $index" class="section-diff-row" ng-class="{ 'no-changes': view.state.sections.list[sectionId].dwHasChanges === false, 'no-remote': view.state.sections.list[sectionId].dwChanges === null }"
					ng-init="sectionUniqueKey = view.state.sections.list[sectionId].uniqueKey">
					<!-- CRN -->
					<div class="section-diff-element section-crn" ng-class="{ 'has-changes' : view.state.sections.list[sectionId].dwChanges[sectionUniqueKey].crn !== undefined }">
						<span class="ipa-version">
							{{ view.state.sections.list[sectionId].crn || "No CRN" }}
						</span>
						<span class="change-action" ng-if="view.state.sections.list[sectionId].dwChanges[sectionUniqueKey].crn !== undefined">
							Banner has: {{ view.state.sections.list[sectionId].dwChanges[sectionUniqueKey].crn }}
						</span>
					</div>
					<!-- Section immutable fields: Title, Subject Code, Course Number, and Sequence Number -->
					<div class="section-diff-element section-unique-key">
						- {{ view.state.sections.list[sectionId].subjectCode }} {{ view.state.sections.list[sectionId].courseNumber
						}} {{ view.state.sections.list[sectionId].title }} - {{ view.state.sections.list[sectionId].sequenceNumber
						}} -
					</div>
					<!-- Seats -->
					<div class="section-diff-element section-seats" ng-class="{ 'has-changes' : view.state.sections.list[sectionId].dwChanges[sectionUniqueKey].seats !== undefined }">
						<span class="ipa-version">
							Seats: {{ view.state.sections.list[sectionId].seats }}
						</span>
						<span class="change-action" ng-if="view.state.sections.list[sectionId].dwChanges[sectionUniqueKey].seats !== undefined">
							Banner has: {{ view.state.sections.list[sectionId].dwChanges[sectionUniqueKey].seats }}
						</span>
					</div>
					<!-- Instructors -->
					<div class="section-diff-element section-instructors-header">
						- Instructors:
					</div>
					<!-- Instructors in IPA -->
					<div ng-repeat="instructor in view.state.sections.list[sectionId].instructors track by $index" ng-class="{ 'has-changes' : instructor.noRemote }"
						class="section-diff-element section-instructors">
						<span class="ipa-version" ng-class="{ 'no-remote' : instructor.noRemote }">
							{{ instructor | lastSpaceInitial }}
						</span>
						<span class="change-action" ng-if="instructor.noRemote">
							Banner does not have this instructor
							<button class="form-control">Mark to assign on Banner</button>
							<button class="form-control">Un-assign in IPA</button>
						</span>
					</div>
					<!-- Instructors only in DW -->
					<div ng-repeat="instructor in view.state.sections.list[sectionId].dwChanges[sectionUniqueKey].instructors track by $index"
						class="section-diff-element section-instructors has-changes">
						<span class="no-local">
							{{ instructor | lastSpaceInitial }}
						</span>
						<span class="change-action">
							IPA does not have this instructor (Click to assign)
						</span>
					</div>
					<!-- Activities -->
					<ul class="section-activities-diff-list">
						<!-- Activities in IPA -->
						<li ng-repeat="activity in view.state.sections.list[sectionId].activities track by $index" ng-class="{ 'no-remote' : activity.noRemote }"
							class="section-activity-diff-row">
							<!-- typeCode -->
							<div class="activity-diff-element activity-type-code">
								{{ activity.typeCode.getActivityCodeDescription() }}
							</div>
							<!-- dayIndicator -->
							- Days:
							<div class="activity-diff-element activity-day-indicator" ng-class="{ 'has-changes' : !activity.noRemote && view.state.sections.list[sectionId].dwChanges[activity.uniqueKey].dayIndicator !== undefined }">
								<span class="ipa-version">
										{{ activity.dayIndicator.getWeekDays() || 'none' }}
									</span>
								<span class="change-action" ng-if="!activity.noRemote && view.state.sections.list[sectionId].dwChanges[activity.uniqueKey].dayIndicator !== undefined">
										Banner days: {{ view.state.sections.list[sectionId].dwChanges[activity.uniqueKey].dayIndicator.getWeekDays() }}
									</span>
							</div>
							<!-- startTime -->
							- Start Time:
							<div class="activity-diff-element activity-start-time" ng-class="{ 'has-changes' : !activity.noRemote && view.state.sections.list[sectionId].dwChanges[activity.uniqueKey].startTime !== undefined }">
								<span class="ipa-version">
										{{ activity.startTime.toStandardTime() || 'none' }}
									</span>
								<span class="change-action" ng-if="!activity.noRemote && view.state.sections.list[sectionId].dwChanges[activity.uniqueKey].startTime !== undefined">
										Banner: {{ view.state.sections.list[sectionId].dwChanges[activity.uniqueKey].startTime.toStandardTime() }}
									</span>
							</div>
							<!-- endTime -->
							- End Time:
							<div class="activity-diff-element activity-end-time" ng-class="{ 'has-changes' : !activity.noRemote && view.state.sections.list[sectionId].dwChanges[activity.uniqueKey].endTime !== undefined }">
								<span class="ipa-version">
										{{ activity.endTime.toStandardTime() || 'none' }}
									</span>
								<span class="change-action" ng-if="!activity.noRemote && view.state.sections.list[sectionId].dwChanges[activity.uniqueKey].endTime !== undefined">
										Banner: {{ view.state.sections.list[sectionId].dwChanges[activity.uniqueKey].endTime }}
									</span>
							</div>
							<!-- location -->
							- Location:
							<div class="activity-diff-element activity-location" ng-class="{ 'has-changes' : !activity.noRemote && view.state.sections.list[sectionId].dwChanges[activity.uniqueKey].location !== undefined }">
								<span class="ipa-version">
										{{ activity.location || 'none' }}
									</span>
								<span class="change-action" ng-if="!activity.noRemote && view.state.sections.list[sectionId].dwChanges[activity.uniqueKey].location !== undefined">
										Banner: {{ view.state.sections.list[sectionId].dwChanges[activity.uniqueKey].location }}
									</span>
							</div>
						</li>
						<!-- Activities only in DW -->
						<li ng-repeat="activity in view.state.sections.list[sectionId].dwChanges[sectionUniqueKey].activities track by $index"
							class="section-activity-diff-row has-changes">
							<span class="no-local">
								<div class="activity-diff-element activity-type-code">
									{{ activity.typeCode.getActivityCodeDescription() }}
								</div>
								- Days:
								<div class="activity-diff-element activity-day-indicator">
									{{ activity.dayIndicator.getWeekDays() || 'none' }}
								</div>
								- Start Time:
								<div class="activity-diff-element activity-start-time">
									{{ activity.startTime.toStandardTime() || 'none' }}
								</div>
								- End Time:
								<div class="activity-diff-element activity-end-time">
									{{ activity.endTime.toStandardTime() || 'none' }}
								</div>
								- Location:
								<div class="activity-diff-element activity-location">
									{{ activity.location || 'none' }}
								</div>
							</span>
							<span class="change-action">
								IPA does not have this activity (Click to create)
							</span>
						</li>
					</ul>
				</li>
			</ul>
		</div>
	</div>

</div>