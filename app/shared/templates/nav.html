<div class="sidebar-menu">

	<div class="sidebar-menu-inner">

		<header class="logo-env">

			<!-- logo -->
			<div class="logo">
				<a ng-href="/summary/{{ workgroupId }}/{{ year }}">
					<h1 style="color: #fff; margin:0;">IPA</h1>
				</a>
			</div>

			<!-- logo collapse icon -->
			<div class="sidebar-collapse">
				<a class="sidebar-collapse-icon clickable" ng-click="toggleSidebarState()"
					uib-tooltip="Toggle Sidebar" tooltip-placement="right" tooltip-append-to-body="true">
					<!-- add class "with-animation" if you want sidebar to have animation during expanding/collapsing transition -->
					<i class="entypo-menu"></i>
				</a>
			</div>


			<!-- open/close menu icon (do not remove if you want to enable menu on mobile devices) -->
			<div class="sidebar-mobile-menu visible-xs">
				<a href="#" class="with-animation"><!-- add class "with-animation" to support animation -->
					<i class="entypo-menu"></i>
				</a>
			</div>

		</header>

		<!-- User and Organization -->
		<ul id="main-menu" class="main-menu">
			<!-- add class "multiple-expanded" to allow multiple submenus to open -->
			<!-- class "auto-inherit-active-class" will automatically add "active" class for parent elements who are marked already with class "active" -->
			<li class="welcome">
					<span class="title">Howdy, {{ sharedState.displayName }}</span>
			</li>
			<li ng-if="sharedState.isAdmin" ng-class="{ 'active': currentBaseHref == 'admin' }">
				<a ng-href="/admin/{{ workgroupId }}/{{ year }}">
					<i class="entypo-cog"></i>
					<span class="title">Administration</span>
				</a>
			</li>

			<li ng-class="{ 'active': currentBaseHref == 'summary' }" ng-if="sharedState.isAcademicPlanner && sharedState.isInstructor">
				<a>
					<i class="entypo-home"></i>
					<span class="title">Home</span>
				</a>
				<ul class="visible">
					<li ng-class="{ 'active': currentBaseHref == 'summary' && currentEndHref == 'workgroup' }">
						<a ng-href="/summary/{{ workgroupId }}/{{ year }}/workgroup">
							Workgroup Summary
						</a>
					</li>
					<li ng-class="{ 'active': currentBaseHref == 'summary' && currentEndHref == 'instructor' }">
						<a ng-href="/summary/{{ workgroupId }}/{{ year }}/instructor">
							Instructor Summary
						</a>
					</li>
				</ul>
			</li>
			<!-- handle UI for users with either academicPlanner or instructor, but not both -->
			<li ng-if="(sharedState.isAcademicPlanner && (sharedState.isInstructor == false))" ng-class="{ 'active': currentBaseHref == 'summary' && currentEndHref == 'workgroup' }">
				<a class="clickable" ng-href="/summary/{{ workgroupId }}/{{ year }}/workgroup">
					<i class="entypo-home"></i>
					<span class="title">Summary</span>
				</a>
			</li>
			<li ng-if="((sharedState.isAcademicPlanner == false) && sharedState.isInstructor)" ng-class="{ 'active': currentBaseHref == 'summary' && currentEndHref == 'instructor' }">
				<a class="clickable" ng-href="/summary/{{ workgroupId }}/{{ year }}/instructor">
					<i class="entypo-home"></i>
					<span class="title">Summary</span>
				</a>
			</li>

			<li ng-class="{ 'active': currentBaseHref == 'workgroups' }">
				<a ng-if="sharedState.userWorkgroups.length > 1">
					<i class="entypo-users"></i>
					<span class="title">Workgroups</span>
				</a>
				<a ng-href="/workgroups/{{ sharedState.workgroup.id }}/{{ year }}"
					ng-if="sharedState.userWorkgroups.length == 1 && userHasRoles(['academicPlanner'])">
					<i class="entypo-users"></i>
					<span class="title">{{ sharedState.workgroup.name }}</span>
				</a>
				<ul class="visible" ng-if="sharedState.userWorkgroups.length > 1">
					<li ng-repeat="workgroup in sharedState.userWorkgroups track by workgroup.id"
					ng-class="{ 'active': sharedState.workgroup.id == workgroup.id }">
						<a ng-href="/{{ currentBaseHref }}/{{ workgroup.id }}/{{ year }}/{{ termShortCode }}">
							<i class="entypo-check active-workgroup-icon" ng-if="sharedState.workgroup.id == workgroup.id"></i>
							<span class="title">{{ workgroup.name }}</span>
						</a>
						<a ng-href="/workgroups/{{ workgroup.id }}/{{ year }}"
							ng-if="userHasRolesForWorkgroup(['academicPlanner'], workgroup)" class="icon-workgroup-manage"
							uib-tooltip="Manage {{ workgroup.name }}" tooltip-append-to-body="true" tooltip-placement="right">
							<span class="glyphicon glyphicon-cog" aria-hidden="true"></span>
						</a>
					</li>
					<!--	Show the current workgroup separately if it is not in the user workgroups
								(happens if the current user is admin and managing a workgroup they're not in) -->
					<li ng-if="hasExtraWorkgroup()" class="active">
						<a ng-href="/{{ currentBaseHref }}/{{ sharedState.workgroup.id }}/{{ year }}/{{ termShortCode }}">
							<i class="entypo-check active-workgroup-icon"></i>
							<span class="title">({{ sharedState.workgroup.name }})</span>
						</a>
						<a ng-href="/workgroups/{{ sharedState.workgroup.id }}/{{ year }}" class="icon-workgroup-manage"
							uib-tooltip="Manage {{ sharedState.workgroup.name }}" tooltip-append-to-body="true" tooltip-placement="right">
							<span class="glyphicon glyphicon-cog" aria-hidden="true"></span>
						</a>
					</li>
				</ul>
			</li>
		</ul>

		<!-- Year switcher -->
		<ul class="pager year-switcher">
			<li class="previous"><a ng-href="/{{ currentBaseHref }}/{{ workgroupId }}/{{ yearOffset(-1) }}/{{ termShortCode }}"><i class="entypo-left-open-mini clickable hoverable"></i></a></li>
			<li ><a>{{ year.yearToAcademicYear() }}</a></li>
			<li class="next"><a ng-href="/{{ currentBaseHref }}/{{ workgroupId }}/{{ yearOffset(1) }}/{{ termShortCode }}"><i class="entypo-right-open-mini clickable hoverable"></i></a></li>
		</ul>

		<!-- Sidebar links -->
		<ul id="main-menu" class="main-menu">

			<!-- add class "multiple-expanded" to allow multiple submenus to open -->
			<!-- class "auto-inherit-active-class" will automatically add "active" class for parent elements who are marked already with class "active" -->
			<li ng-class="{ 'active': currentBaseHref == 'courses' }" ng-if="userHasRoles(['academicPlanner'])">
				<a ng-href="/courses/{{ workgroupId }}/{{ year }}">
					<i class="entypo-book"></i>
					<span class="title">Courses</span>
				</a>
			</li>
			<li ng-class="{ 'active': currentEndHref == 'teachingCallStatus' }">
				<a ng-href="/assignments/{{ workgroupId }}/{{ year }}/teachingCallStatus">
					<i class="entypo-user-add"></i>
					<span class="title">Teaching Call</span>
				</a>
				<ul class="visible">
					<li ng-class="{ 'active': currentBaseHref == 'assignments' && currentEndHref != 'teachingCallStatus' }" ng-if="userHasRoles(['academicPlanner'])">
						<a ng-href="/assignments/{{ workgroupId }}/{{ year }}">
							<span class="title">Assignments</span>
						</a>
					</li>
				</ul>
			</li>
			<li ng-class="{ 'active': currentBaseHref == 'scheduling' }" ng-if="userHasRoles(['academicPlanner'])">
				<a>
					<i class="entypo-calendar"></i>
					<span class="title">Scheduling</span>
				</a>
				<ul class="visible">
					<li ng-repeat="term in getYearTerms() track by term.id" ng-class="{'active': term.shortCode == termShortCode}"
						ng-class="{ 'active': currentBaseHref == 'scheduling' && termShortCode == term.shortCode }">
						<a ng-href="/scheduling/{{ workgroupId }}/{{ year }}/{{ term.shortCode }}">
							{{ term.description }}
						</a>
					</li>
				</ul>
			</li>

		</ul>

		<!-- Logout -->
		<ul id="main-menu" class="main-menu">
			<li>
				<a class="clickable" ng-click="logout()">
					<i class="entypo-logout"></i>
					<span class="title">Logout</span>
				</a>
			</li>
		</ul>

	</div>

</div>
